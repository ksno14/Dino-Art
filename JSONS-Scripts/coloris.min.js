/*!
 * Copyright (c) 2021 Momo Bassit.
 * Licensed under the MIT License (MIT)
 * https://github.com/mdbassit/Coloris
 */
!function(e,t,a){var l,r,n,o,c,i,s,u,d,f,p,h,v,b,y,g,m,w=t.createElement("canvas").getContext("2d"),k={r:0,g:0,b:0,h:0,s:0,v:0,a:1},L={el:"[data-coloris]",parent:"body",theme:"default",themeMode:"light",rtl:!1,wrap:!0,margin:2,format:"hex",formatToggle:!1,swatches:[],swatchesOnly:!1,alpha:!0,forceAlpha:!1,focusInput:!0,selectInput:!1,inline:!1,defaultColor:"#000000",clearButton:!1,clearLabel:"Clear",closeButton:!1,closeLabel:"Close",onChange:function(){},a11y:{open:"Open color picker",close:"Close color picker",clear:"Clear the selected color",marker:"Saturation: {s}. Brightness: {v}.",hueSlider:"Hue slider",alphaSlider:"Opacity slider",input:"Color value field",format:"Color format",swatch:"Color swatch",instruction:"Saturation and brightness selector. Use up, down, left and right arrow keys to select."}},E={},x="",A={},S=!1;function C(a){if("object"==typeof a)for(var o in a)switch(o){case"el":H(a.el),!1!==a.wrap&&D(a.el);break;case"parent":(l=t.querySelector(a.parent))&&(l.appendChild(r),L.parent=a.parent,l===t.body&&(l=null));break;case"themeMode":L.themeMode=a.themeMode,"auto"===a.themeMode&&e.matchMedia&&e.matchMedia("(prefers-color-scheme: dark)").matches&&(L.themeMode="dark");case"theme":a.theme&&(L.theme=a.theme),r.className="clr-picker clr-"+L.theme+" clr-"+L.themeMode,L.inline&&O();break;case"rtl":L.rtl=!!a.rtl,t.querySelectorAll(".clr-field").forEach((function(e){return e.classList.toggle("clr-rtl",L.rtl)}));break;case"margin":a.margin*=1,L.margin=isNaN(a.margin)?L.margin:a.margin;break;case"wrap":a.el&&a.wrap&&D(a.el);break;case"formatToggle":L.formatToggle=!!a.formatToggle,$("clr-format").style.display=L.formatToggle?"block":"none",L.formatToggle&&(L.format="auto");break;case"swatches":Array.isArray(a.swatches)&&function(){var e=[];a.swatches.forEach((function(t,a){e.push('<button type="button" id="clr-swatch-'+a+'" aria-labelledby="clr-swatch-label clr-swatch-'+a+'" style="color: '+t+';">'+t+"</button>")})),$("clr-swatches").innerHTML=e.length?"<div>"+e.join("")+"</div>":"",L.swatches=a.swatches.slice()}();break;case"swatchesOnly":L.swatchesOnly=!!a.swatchesOnly,r.setAttribute("data-minimal",L.swatchesOnly);break;case"alpha":L.alpha=!!a.alpha,r.setAttribute("data-alpha",L.alpha);break;case"inline":if(L.inline=!!a.inline,r.setAttribute("data-inline",L.inline),L.inline){var c=a.defaultColor||L.defaultColor;y=j(c),O(),I(c)}break;case"clearButton":"object"==typeof a.clearButton&&(a.clearButton.label&&(L.clearLabel=a.clearButton.label,u.innerHTML=L.clearLabel),a.clearButton=a.clearButton.show),L.clearButton=!!a.clearButton,u.style.display=L.clearButton?"block":"none";break;case"clearLabel":L.clearLabel=a.clearLabel,u.innerHTML=L.clearLabel;break;case"closeButton":L.closeButton=!!a.closeButton,L.closeButton?r.insertBefore(d,i):i.appendChild(d);break;case"closeLabel":L.closeLabel=a.closeLabel,d.innerHTML=L.closeLabel;break;case"a11y":var p=a.a11y,v=!1;if("object"==typeof p)for(var b in p)p[b]&&L.a11y[b]&&(L.a11y[b]=p[b],v=!0);if(v){var g=$("clr-open-label"),m=$("clr-swatch-label");g.innerHTML=L.a11y.open,m.innerHTML=L.a11y.swatch,d.setAttribute("aria-label",L.a11y.close),u.setAttribute("aria-label",L.a11y.clear),f.setAttribute("aria-label",L.a11y.hueSlider),h.setAttribute("aria-label",L.a11y.alphaSlider),s.setAttribute("aria-label",L.a11y.input),n.setAttribute("aria-label",L.a11y.instruction)}break;default:L[o]=a[o]}}function T(e,t){"string"==typeof e&&"object"==typeof t&&(E[e]=t,S=!0)}function B(e){delete E[e],0===Object.keys(E).length&&(S=!1,e===x&&M())}function M(){Object.keys(A).length>0&&(C(A),x="",A={})}function H(e){z(t,"click",e,(function(e){L.inline||(!function(e){if(S){var t=["el","wrap","rtl","inline","defaultColor","a11y"],a=function(a){var l=E[a];if(e.matches(a)){for(var r in x=a,A={},t.forEach((function(e){return delete l[e]})),l)A[r]=Array.isArray(L[r])?L[r].slice():L[r];return C(l),"break"}};for(var l in E)if("break"===a(l))break}}(e.target),b=e.target,g=b.value,y=j(g),r.classList.add("clr-open"),O(),I(g),(L.focusInput||L.selectInput)&&s.focus({preventScroll:!0}),L.selectInput&&s.select(),(m||L.swatchesOnly)&&K().shift().focus(),b.dispatchEvent(new Event("open",{bubbles:!0})))})),z(t,"input",e,(function(e){var t=e.target.parentNode;t.classList.contains("clr-field")&&(t.style.color=e.target.value)}))}function O(){var a,c,i,s=l,u=e.scrollY,d=r.offsetWidth,f=r.offsetHeight,p={left:!1,top:!1},h={x:0,y:0};if(s&&(a=e.getComputedStyle(s),c=parseFloat(a.marginTop),i=parseFloat(a.borderTopWidth),(h=s.getBoundingClientRect()).y+=i+u),!L.inline){var v=b.getBoundingClientRect(),y=v.x,g=u+v.y+v.height+L.margin;s?(y-=h.x,g-=h.y,y+d>s.clientWidth&&(y+=v.width-d,p.left=!0),g+f>s.clientHeight-c&&f+L.margin<=v.top-(h.y-u)&&(g-=v.height+f+2*L.margin,p.top=!0),g+=s.scrollTop):(y+d>t.documentElement.clientWidth&&(y+=v.width-d,p.left=!0),g+f-u>t.documentElement.clientHeight&&f+L.margin<=v.top&&(g=u+v.y-f-L.margin,p.top=!0)),r.classList.toggle("clr-left",p.left),r.classList.toggle("clr-top",p.top),r.style.left=y+"px",r.style.top=g+"px",h.x+=r.offsetLeft,h.y+=r.offsetTop}o={width:n.offsetWidth,height:n.offsetHeight,x:n.offsetLeft+h.x,y:n.offsetTop+h.y}}function D(e){t.querySelectorAll(e).forEach((function(e){var a=e.parentNode;if(!a.classList.contains("clr-field")){var l=t.createElement("div"),r="clr-field";(L.rtl||e.classList.contains("clr-rtl"))&&(r+=" clr-rtl"),l.innerHTML='<button type="button" aria-labelledby="clr-open-label"></button>',a.insertBefore(l,e),l.setAttribute("class",r),l.style.color=e.value,l.appendChild(e)}}))}function N(e){if(b&&!L.inline){var t=b;e&&(b=null,g!==t.value&&(t.value=g,t.dispatchEvent(new Event("input",{bubbles:!0})))),setTimeout((function(){g!==t.value&&t.dispatchEvent(new Event("change",{bubbles:!0}))})),r.classList.remove("clr-open"),S&&M(),t.dispatchEvent(new Event("close",{bubbles:!0})),L.focusInput&&t.focus({preventScroll:!0}),b=null}}function I(e){var t=function(e){var t,a,l=/^((rgba)|rgb)[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)[\D]*?([\d.]+|$)/i;w.fillStyle="#000",w.fillStyle=e,(t=l.exec(w.fillStyle))?(a={r:1*t[3],g:1*t[4],b:1*t[5],a:1*t[6]}).a=+a.a.toFixed(2):a={r:(t=w.fillStyle.replace("#","").match(/.{2}/g).map((function(e){return parseInt(e,16)})))[0],g:t[1],b:t[2],a:1};return a}(e),l=function(e){var t=e.r/255,l=e.g/255,r=e.b/255,n=a.max(t,l,r),o=a.min(t,l,r),c=n-o,i=n,s=0,u=0;c&&(n===t&&(s=(l-r)/c),n===l&&(s=2+(r-t)/c),n===r&&(s=4+(t-l)/c),n&&(u=c/n));return{h:(s=a.floor(60*s))<0?s+360:s,s:a.round(100*u),v:a.round(100*i),a:e.a}}(t);F(l.s,l.v),P(t,l),f.value=l.h,r.style.color="hsl("+l.h+", 100%, 50%)",p.style.left=l.h/360*100+"%",c.style.left=o.width*l.s/100+"px",c.style.top=o.height-o.height*l.v/100+"px",h.value=100*l.a,v.style.left=100*l.a+"%"}function j(e){var t=e.substring(0,3).toLowerCase();return"rgb"===t||"hsl"===t?t:"hex"}function W(a){a=void 0!==a?a:s.value,b&&(b.value=a,b.dispatchEvent(new Event("input",{bubbles:!0}))),L.onChange&&L.onChange.call(e,a),t.dispatchEvent(new CustomEvent("coloris:pick",{detail:{color:a}}))}function q(e,t){var l={h:1*f.value,s:e/o.width*100,v:100-t/o.height*100,a:h.value/100},r=function(e){var t=e.s/100,l=e.v/100,r=t*l,n=e.h/60,o=r*(1-a.abs(n%2-1)),c=l-r;r+=c,o+=c;var i=a.floor(n)%6,s=[r,o,c,c,o,r][i],u=[o,r,r,o,c,c][i],d=[c,c,o,r,r,o][i];return{r:a.round(255*s),g:a.round(255*u),b:a.round(255*d),a:e.a}}(l);F(l.s,l.v),P(r,l),W()}function F(e,t){var a=L.a11y.marker;e=1*e.toFixed(1),t=1*t.toFixed(1),a=(a=a.replace("{s}",e)).replace("{v}",t),c.setAttribute("aria-label",a)}function R(e){var t=function(e){return{pageX:e.changedTouches?e.changedTouches[0].pageX:e.pageX,pageY:e.changedTouches?e.changedTouches[0].pageY:e.pageY}}(e),a=t.pageX-o.x,r=t.pageY-o.y;l&&(r+=l.scrollTop),X(a,r),e.preventDefault(),e.stopPropagation()}function Y(e,t){X(1*c.style.left.replace("px","")+e,1*c.style.top.replace("px","")+t)}function X(e,t){e=e<0?0:e>o.width?o.width:e,t=t<0?0:t>o.height?o.height:t,c.style.left=e+"px",c.style.top=t+"px",q(e,t),c.focus()}function P(e,l){void 0===e&&(e={}),void 0===l&&(l={});var r=L.format;for(var o in e)k[o]=e[o];for(var u in l)k[u]=l[u];var d,f=function(e){var t=e.r.toString(16),a=e.g.toString(16),l=e.b.toString(16),r="";e.r<16&&(t="0"+t);e.g<16&&(a="0"+a);e.b<16&&(l="0"+l);if(L.alpha&&(e.a<1||L.forceAlpha)){var n=255*e.a|0;r=n.toString(16),n<16&&(r="0"+r)}return"#"+t+a+l+r}(k),p=f.substring(0,7);switch(c.style.color=p,v.parentNode.style.color=p,v.style.color=f,i.style.color=f,n.style.display="none",n.offsetHeight,n.style.display="",v.nextElementSibling.style.display="none",v.nextElementSibling.offsetHeight,v.nextElementSibling.style.display="","mixed"===r?r=1===k.a?"hex":"rgb":"auto"===r&&(r=y),r){case"hex":s.value=f;break;case"rgb":s.value=function(e){return!L.alpha||1===e.a&&!L.forceAlpha?"rgb("+e.r+", "+e.g+", "+e.b+")":"rgba("+e.r+", "+e.g+", "+e.b+", "+e.a+")"}(k);break;case"hsl":s.value=(d=function(e){var t,l=e.v/100,r=l*(1-e.s/100/2);return r>0&&r<1&&(t=a.round((l-r)/a.min(r,1-r)*100)),{h:e.h,s:t||0,l:a.round(100*r),a:e.a}}(k),!L.alpha||1===d.a&&!L.forceAlpha?"hsl("+d.h+", "+d.s+"%, "+d.l+"%)":"hsla("+d.h+", "+d.s+"%, "+d.l+"%, "+d.a+")")}t.querySelector('.clr-format [value="'+r+'"]').checked=!0}function U(){var e=1*f.value,t=1*c.style.left.replace("px",""),a=1*c.style.top.replace("px","");r.style.color="hsl("+e+", 100%, 50%)",p.style.left=e/360*100+"%",q(t,a)}function G(){var e=h.value/100;v.style.left=100*e+"%",P({a:e}),W()}function K(){return Array.from(r.querySelectorAll("input, button")).filter((function(e){return!!e.offsetWidth}))}function $(e){return t.getElementById(e)}function z(e,t,a,l){var r=Element.prototype.matches||Element.prototype.msMatchesSelector;"string"==typeof a?e.addEventListener(t,(function(e){r.call(e.target,a)&&l.call(e.target,e)})):(l=a,e.addEventListener(t,l))}function J(e,a){a=void 0!==a?a:[],"loading"!==t.readyState?e.apply(void 0,a):t.addEventListener("DOMContentLoaded",(function(){e.apply(void 0,a)}))}void 0!==NodeList&&NodeList.prototype&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),e.Coloris=function(){var e={set:C,wrap:D,close:N,setInstance:T,removeInstance:B,updatePosition:O};function t(e){J((function(){e&&("string"==typeof e?H(e):C(e))}))}var a=function(a){t[a]=function(){for(var t=arguments.length,l=new Array(t),r=0;r<t;r++)l[r]=arguments[r];J(e[a],l)}};for(var l in e)a(l);return t}(),J((function(){l=null,(r=t.createElement("div")).setAttribute("id","clr-picker"),r.className="clr-picker",r.innerHTML='<input id="clr-color-value" name="clr-color-value" class="clr-color" type="text" value="" spellcheck="false" aria-label="'+L.a11y.input+'"><div id="clr-color-area" class="clr-gradient" role="application" aria-label="'+L.a11y.instruction+'"><div id="clr-color-marker" class="clr-marker" tabindex="0"></div></div><div class="clr-hue"><input id="clr-hue-slider" name="clr-hue-slider" type="range" min="0" max="360" step="1" aria-label="'+L.a11y.hueSlider+'"><div id="clr-hue-marker"></div></div><div class="clr-alpha"><input id="clr-alpha-slider" name="clr-alpha-slider" type="range" min="0" max="100" step="1" aria-label="'+L.a11y.alphaSlider+'"><div id="clr-alpha-marker"></div><span></span></div><div id="clr-format" class="clr-format"><fieldset class="clr-segmented"><legend>'+L.a11y.format+'</legend><input id="clr-f1" type="radio" name="clr-format" value="hex"><label for="clr-f1">Hex</label><input id="clr-f2" type="radio" name="clr-format" value="rgb"><label for="clr-f2">RGB</label><input id="clr-f3" type="radio" name="clr-format" value="hsl"><label for="clr-f3">HSL</label><span></span></fieldset></div><div id="clr-swatches" class="clr-swatches"></div><button type="button" id="clr-clear" class="clr-clear" aria-label="'+L.a11y.clear+'">'+L.clearLabel+'</button><div id="clr-color-preview" class="clr-preview"><button type="button" id="clr-close" class="clr-close" aria-label="'+L.a11y.close+'">'+L.closeLabel+'</button></div><span id="clr-open-label" hidden>'+L.a11y.open+'</span><span id="clr-swatch-label" hidden>'+L.a11y.swatch+"</span>",t.body.appendChild(r),n=$("clr-color-area"),c=$("clr-color-marker"),u=$("clr-clear"),d=$("clr-close"),i=$("clr-color-preview"),s=$("clr-color-value"),f=$("clr-hue-slider"),p=$("clr-hue-marker"),h=$("clr-alpha-slider"),v=$("clr-alpha-marker"),H(L.el),D(L.el),z(r,"mousedown",(function(e){r.classList.remove("clr-keyboard-nav"),e.stopPropagation()})),z(n,"mousedown",(function(e){z(t,"mousemove",R)})),z(n,"touchstart",(function(e){t.addEventListener("touchmove",R,{passive:!1})})),z(c,"mousedown",(function(e){z(t,"mousemove",R)})),z(c,"touchstart",(function(e){t.addEventListener("touchmove",R,{passive:!1})})),z(s,"change",(function(e){(b||L.inline)&&(I(s.value),W())})),z(u,"click",(function(e){W(""),N()})),z(d,"click",(function(e){W(),N()})),z(t,"click",".clr-format input",(function(e){y=e.target.value,P(),W()})),z(r,"click",".clr-swatches button",(function(e){I(e.target.textContent),W()})),z(t,"mouseup",(function(e){t.removeEventListener("mousemove",R)})),z(t,"touchend",(function(e){t.removeEventListener("touchmove",R)})),z(t,"mousedown",(function(e){m=!1,r.classList.remove("clr-keyboard-nav"),N()})),z(t,"keydown",(function(e){var t=e.key,a=e.target,l=e.shiftKey;if("Escape"===t?N(!0):["Tab","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(t)&&(m=!0,r.classList.add("clr-keyboard-nav")),"Tab"===t&&a.matches(".clr-picker *")){var n=K(),o=n.shift(),c=n.pop();l&&a===o?(c.focus(),e.preventDefault()):l||a!==c||(o.focus(),e.preventDefault())}})),z(t,"click",".clr-field button",(function(e){S&&M(),e.target.nextElementSibling.dispatchEvent(new Event("click",{bubbles:!0}))})),z(c,"keydown",(function(e){var t={ArrowUp:[0,-1],ArrowDown:[0,1],ArrowLeft:[-1,0],ArrowRight:[1,0]};Object.keys(t).includes(e.key)&&(Y.apply(void 0,t[e.key]),e.preventDefault())})),z(n,"click",R),z(f,"input",U),z(h,"input",G)}))}(window,document,Math);